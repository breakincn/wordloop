WordLoop 背单词 App - Windsurf / Flutter 开发方案:
1️⃣ 项目概述
名称：WordLoop
平台：Flutter (iOS + Android)
核心目标：
结合主动拼写回忆、多轮错词复习、盲打强化，打造高效单词记忆系统
核心理念：
主动回忆：用户必须输入拼写
多通道记忆：视觉（单词/音标）、听觉（发音）、动作（输入）
闭环复习：错词自动加入复习队列，保证最终掌握

2️⃣ 数据结构设计
class Word {
  String id;             // 唯一单词ID
  String word;           // 单词拼写
  String phonetic;       // 音标
  String meaning;        // 中文释义
  int length;            // 单词长度
  int stage;             // 当前阶段（0~5）
  int errorCount;        // 错误次数
  bool inWrongList;      // 是否在错词表
  int priority;          // 错词权重
  DateTime lastAttempt;  // 最近一次尝试时间
  int attemptCount;      // 总尝试次数
}

错词表管理：
List<Word> wrongWords = []; // 阶段 2 & 4 错词统一管理


3️⃣ 页面结构（Flutter Widget 层次）
MainScreen (Scaffold)
 ├── AppBar: 标题 + 当前阶段/进度
 ├── Column
 │    ├── WordDisplayArea
 │    │    ├── WordText (阶段1/2可隐藏)
 │    │    └── PhoneticText (音标固定显示)
 │    ├── MeaningText (可选/阶段4显示)
 │    ├── InputField (TextField)
 │    └── HintArea (词根提示/错误提示)
 ├── BottomControlBar
 │    ├── NextButton / AutoPlayButton
 │    └── SkipButton (阶段0/1可加速)
 └── ProgressIndicator (10 个单词进度)


4️⃣ 阶段设计与状态机
状态机 Diagram（逻辑描述）
[Phase 0: Preview] 
    ↓
[Phase 1: Spelling Input] 
    ↓
[Phase 2: Display→Hide Recall] 
    ↓
[Phase 3: Wrong Word Review] 
    ↓
[Phase 4: Blind Test] 
    ↓
[Phase 5: Completion]

阶段 详细逻辑
阶段描述用户交互优化规则
0 - 顺序浏览
单词 + 音标 + 发音
可跳过或加速
显示时间 = 1.5s + 0.2 × 单词长度
1 - 拼写输入
单词显示，用户输入拼写
输入错误提示，重复次数自适应
首次正确 → 下一轮只需输入一次；错误 → 重复输入（≤3 次）
2 - 显示→隐藏回忆
单词显示 → 隐藏，音标保留，播放发音
用户输入拼写
错误触发提示：
第一次错 → 词根 + 音标
第二次错 → 词根 + 中文释义 + 音标
第三次错 → 完整单词
错词加入错词表 |
| 3 - 错词复习 | 阶段 2 错词循环复习 | 用户输入 | 循环最多 2 次或限时 5 分钟，仍错误标记重点单词 |
| 4 - 盲打强化 | 仅音标 + 中文释义，无单词提示 | 用户盲打 | 错词加入错词表，循环最多 2 次，仍未成功标记重点 |
| 5 - 完成 | 本组学习完成 | 展示总结 | 统计正确率，展示错词/掌握情况 |

5️⃣ 用户交互与提示逻辑
5.1 输入与错误提示
TextField 输入时动态检查拼写
输入错误：
阶段1：红色标记错误字母
阶段2/4：
第一次错 → 显示词根 + 音标（1.5 秒淡出）
第二次错 → 词根 + 中文释义 + 音标
第三次错 → 显示完整单词
5.2 音标和发音
音标始终显示
单词显示或隐藏阶段播放发音
Flutter 可使用 audioplayers 或 just_audio 插件播放音频

6️⃣ 学习进度与循环优化
错词统一管理：阶段2 & 阶段4错词加入同一 wrongWords
循环限制：每组错词循环最多 2 次
优先级排序：priority = errorCount * weight + wordFrequencyRank
显示时间自适应：1.5s + 0.2 × 单词长度

7️⃣ Flutter 核心功能模块设计
模块功能说明
WordManager
单词加载、错词管理、优先级排序
管理当前组单词、错词表、阶段状态
PhaseController
阶段切换逻辑
状态机实现，控制阶段0~5流程
InputValidator
拼写验证
动态对比输入与目标单词，返回错误提示
AudioPlayer
单词发音
支持 mp3 或 tts，阶段0/2/4播放
UIWidgets
单词显示、音标显示、输入框、提示区
Flutter Widget 层次化实现
ProgressTracker
学习进度、正确率统计
更新进度条和错词统计

8️⃣ 关键优化点
自适应显示时间 → 避免无效等待
自适应输入次数 → 减少重复，提高效率
错词统一循环 → 阶段2/4共用错词表
循环次数限制 → 避免用户疲劳
智能分级提示 → 减少重复错误时间

9️⃣ 开发实现建议
使用 Flutter Provider / Riverpod 管理状态
阶段状态机建议用 enum Phase { Preview, SpellingInput, Recall, WrongReview, BlindTest, Completion }
错词表与单词列表可用 List<Word> 管理，支持增删查
音频播放使用异步播放，避免 UI 阻塞
UI 动画可使用 AnimatedOpacity 实现淡入淡出单词

10️⃣ 总结
WordLoop：
闭环错词复习：保证每个单词最终掌握
多阶段递进：从预热到拼写，再到盲打
高效率：自适应显示/输入，循环有限制
Flutter 开发可落地：数据结构、状态机、UI模块、音频播放、提示逻辑均可直接实现


WordLoop App 阶段流程、状态机逻辑和 Flutter Widget 层次图:
1️⃣ 阶段流程图（优化版）
Phase 0: Preview
 ├─> 自动显示单词 + 音标 + 发音
 └─> 用户可跳过/加速
      ↓
Phase 1: Spelling Input
 ├─> 单词显示
 ├─> 用户输入拼写
 ├─> 自适应重复次数
 └─> 输入正确 → 下一单词
      ↓
Phase 2: Display → Hide Recall
 ├─> 单词显示时间自适应 → 隐藏
 ├─> 音标保留
 ├─> 播放发音
 ├─> 用户输入拼写
 └─> 错误触发智能提示（词根/中文/完整单词）
      ↓
Phase 3: Wrong Word Review
 ├─> 阶段2错词复习
 ├─> 循环最多 2 次或限时 5 分钟
 └─> 错误仍标记重点单词
      ↓
Phase 4: Blind Test
 ├─> 仅显示音标 + 中文释义
 ├─> 用户盲打拼写
 └─> 错误加入错词表 → 循环最多 2 次
      ↓
Phase 5: Completion
 ├─> 全部单词掌握
 └─> 展示统计/掌握情况

2️⃣ 状态机逻辑（Flutter 枚举 & 控制）
enum Phase {
  Preview,        // 阶段0
  SpellingInput,  // 阶段1
  Recall,         // 阶段2
  WrongReview,    // 阶段3
  BlindTest,      // 阶段4
  Completion      // 阶段5
}

class PhaseController {
  Phase currentPhase;
  List<Word> wordList;
  List<Word> wrongWords;

  void nextPhase() {
    switch(currentPhase) {
      case Phase.Preview:
        currentPhase = Phase.SpellingInput;
        break;
      case Phase.SpellingInput:
        currentPhase = Phase.Recall;
        break;
      case Phase.Recall:
        currentPhase = wrongWords.isNotEmpty ? Phase.WrongReview : Phase.BlindTest;
        break;
      case Phase.WrongReview:
        currentPhase = Phase.BlindTest;
        break;
      case Phase.BlindTest:
        currentPhase = wrongWords.isNotEmpty ? Phase.WrongReview : Phase.Completion;
        break;
      case Phase.Completion:
        // 学习完成
        break;
    }
  }
}

3️⃣ Flutter Widget 层次结构
MainScreen (Scaffold)
 ├── AppBar
 │    ├── 标题 (WordLoop)
 │    └── 当前阶段/进度
 ├── Column
 │    ├── WordDisplayArea (阶段1/2/4显示单词)
 │    │    ├── WordText (阶段0/1/2可隐藏)
 │    │    └── PhoneticText (音标固定显示)
 │    ├── MeaningText (阶段4显示中文释义)
 │    ├── InputField (TextField)
 │    └── HintArea (词根提示/错误提示)
 ├── BottomControlBar
 │    ├── NextButton / AutoPlayButton
 │    └── SkipButton (阶段0/1可加速)
 └── ProgressIndicator (10 个单词进度)


说明：

WordDisplayArea 使用 AnimatedOpacity 实现单词淡入淡出

HintArea 根据错误次数显示分级提示

ProgressIndicator 根据已完成单词数量实时更新

4️⃣ 智能提示逻辑
void showHint(Word word, int errorCount) {
  if(errorCount == 1) {
    display(word.word.substring(0, 2) + "___"); // 词根 + 音标
  } else if(errorCount == 2) {
    display(word.word.substring(0, 4) + "___" + word.meaning); // 词根 + 中文 + 音标
  } else {
    display(word.word); // 完整单词
  }
}


阶段2/4错误触发

每次显示时间 1.5 秒，淡出动画

5️⃣ 错词复习逻辑

阶段2/4错误单词统一加入 wrongWords

循环次数限制：最多 2 次

超出循环仍未掌握 → 标记为重点单词，下次自动优先复习

避免无限循环，提高效率

6️⃣ 核心功能模块与插件
模块	Flutter 插件/说明
AudioPlayer	just_audio / audioplayers 播放单词发音
AnimatedOpacity	单词淡入淡出效果
State Management	Riverpod / Provider 控制阶段和单词状态
TextField	用户输入拼写动态验证
ProgressIndicator	展示当前组单词完成情况
Timer	控制单词显示时间自适应
7️⃣ 显示时间与输入优化

显示时间自适应：displayTime = 1.5s + 0.2 * word.length

输入次数自适应：

首次正确 → 下一轮只输入一次

错误 → 最多输入 3 次

错词循环最多 2 次或限时 5 分钟

✅ 总结

优化后的 WordLoop Flutter 方案：

阶段清晰：0→1→2→3→4→5

错词闭环统一管理

自适应显示/输入次数，提高效率

智能分级提示，降低重复输入负担

可控循环，避免疲劳

Flutter 可落地：Widget 层次、状态机、数据结构、音频播放、提示逻辑均已明确


WordLoop App 的 可视化图示整理成文字版流程图和 Widget/状态机动画示意:
1️⃣ 最终阶段流程图（优化后）
Phase 0: Preview (顺序浏览)
 ├─> 单词 + 音标 + 发音显示
 ├─> 用户可跳过/加速
 └─> 自动进入 Phase 1

Phase 1: Spelling Input (拼写输入)
 ├─> 单词显示
 ├─> 用户输入拼写
 ├─> 自适应重复次数
 ├─> 输入正确 → 下一单词
 └─> 全部单词完成 → Phase 2

Phase 2: Display→Hide Recall (显示→隐藏回忆)
 ├─> 单词显示时间自适应 → 隐藏
 ├─> 音标保留
 ├─> 播放发音
 ├─> 用户输入拼写
 ├─> 错误触发智能提示
 │     ├─ 第1次错 → 词根 + 音标
 │     ├─ 第2次错 → 词根 + 中文 + 音标
 │     └─ 第3次错 → 完整单词
 └─> 错词加入 wrongWords
      ↓
Phase 3: Wrong Word Review (错词复习)
 ├─> 阶段2错词复习
 ├─> 循环最多 2 次或限时 5 分钟
 └─> 错误仍标记重点单词
      ↓
Phase 4: Blind Test (盲打强化)
 ├─> 仅显示音标 + 中文释义
 ├─> 用户盲打拼写
 ├─> 错词加入 wrongWords
 ├─> 循环最多 2 次
 └─> 未掌握标记为重点
      ↓
Phase 5: Completion (完成)
 ├─> 本组单词掌握
 └─> 展示统计/掌握情况

2️⃣ Flutter Widget 层次 + 动画示意
MainScreen (Scaffold)
 ├── AppBar
 │    ├── 标题: WordLoop
 │    └── 当前阶段 / 进度条
 ├── Column
 │    ├── WordDisplayArea (AnimatedOpacity)
 │    │    ├── WordText (显示/隐藏阶段)
 │    │    └── PhoneticText (音标固定显示)
 │    ├── MeaningText (阶段4盲打显示)
 │    ├── InputField (TextField)
 │    └── HintArea (错误/词根提示动画)
 ├── BottomControlBar
 │    ├── NextButton / AutoPlayButton
 │    └── SkipButton (阶段0/1可加速)
 └── ProgressIndicator (显示已完成单词数)


说明：

WordDisplayArea 使用 AnimatedOpacity 控制单词淡入淡出动画

HintArea 根据错误次数显示分级提示

ProgressIndicator 实时更新完成进度

3️⃣ 状态机与逻辑控制
enum Phase {
  Preview,        // 阶段0
  SpellingInput,  // 阶段1
  Recall,         // 阶段2
  WrongReview,    // 阶段3
  BlindTest,      // 阶段4
  Completion      // 阶段5
}

class PhaseController {
  Phase currentPhase;
  List<Word> wordList;
  List<Word> wrongWords;

  void nextPhase() {
    switch(currentPhase) {
      case Phase.Preview:
        currentPhase = Phase.SpellingInput;
        break;
      case Phase.SpellingInput:
        currentPhase = Phase.Recall;
        break;
      case Phase.Recall:
        currentPhase = wrongWords.isNotEmpty ? Phase.WrongReview : Phase.BlindTest;
        break;
      case Phase.WrongReview:
        currentPhase = Phase.BlindTest;
        break;
      case Phase.BlindTest:
        currentPhase = wrongWords.isNotEmpty ? Phase.WrongReview : Phase.Completion;
        break;
      case Phase.Completion:
        break;
    }
  }
}

4️⃣ 错词提示动画逻辑
void showHint(Word word, int errorCount) {
  if(errorCount == 1) {
    display(word.word.substring(0, 2) + "___"); // 词根 + 音标
  } else if(errorCount == 2) {
    display(word.word.substring(0, 4) + "___" + word.meaning); // 词根 + 中文 + 音标
  } else {
    display(word.word); // 完整单词
  }
}


显示时间 1.5 秒

使用 AnimatedOpacity 淡入淡出

5️⃣ 显示时间与输入优化

单词显示时间自适应：

displayTime = 1.5s + 0.2 × word.length


输入次数自适应：

首次正确 → 下一轮只输入一次

错误 → 最多输入 3 次

错词循环限制：

阶段2/4错词复习最多 2 次

超出仍未掌握标记重点单词

6️⃣ 核心功能模块
模块	Flutter 插件 / 说明
AudioPlayer	just_audio / audioplayers 播放单词发音
AnimatedOpacity	单词淡入淡出动画
State Management	Riverpod / Provider 控制阶段 & 单词状态
TextField	用户输入拼写动态验证
ProgressIndicator	展示已完成单词数量
Timer	控制自适应显示时间
✅ 总结

优化后的 WordLoop：

阶段清晰：0→1→2→3→4→5

错词闭环统一管理

自适应显示/输入次数，提高效率

智能分级提示，降低重复输入负担

可控循环，避免疲劳

Flutter 可落地：Widget 层次、状态机、数据结构、音频播放、提示逻辑均已明确


单词CSV 文本：
group,index,word,ipa,chinese
1,1,travel,/ˈtrævəl/,旅行
1,2,trip,/trɪp/,行程
1,3,ticket,/ˈtɪkɪt/,票
1,4,bus,/bʌs/,公交车
1,5,taxi,/ˈtæksi/,出租车
1,6,train,/treɪn/,火车
1,7,plane,/pleɪn/,飞机
1,8,car,/kɑːr/,汽车
1,9,road,/roʊd/,道路
1,10,map,/mæp/,地图

2,11,airport,/ˈerpɔːrt/,机场
2,12,station,/ˈsteɪʃən/,车站
2,13,stop,/stɑːp/,站点
2,14,gate,/ɡeɪt/,登机口
2,15,exit,/ˈeksɪt/,出口
2,16,entrance,/ˈentrəns/,入口
2,17,platform,/ˈplætfɔːrm/,站台
2,18,terminal,/ˈtɜːrmɪnəl/,航站楼
2,19,counter,/ˈkaʊntər/,柜台
2,20,office,/ˈɔːfɪs/,办公室

3,21,go,/ɡoʊ/,去
3,22,come,/kʌm/,来
3,23,arrive,/əˈraɪv/,到达
3,24,leave,/liːv/,离开
3,25,wait,/weɪt/,等待
3,26,stop,/stɑːp/,停止
3,27,enter,/ˈentər/,进入
3,28,exit,/ˈeksɪt/,离开
3,29,check,/tʃek/,检查
3,30,follow,/ˈfɑːloʊ/,跟随

4,31,time,/taɪm/,时间
4,32,today,/təˈdeɪ/,今天
4,33,tomorrow,/təˈmɑːroʊ/,明天
4,34,now,/naʊ/,现在
4,35,early,/ˈɜːrli/,早
4,36,late,/leɪt/,晚
4,37,daily,/ˈdeɪli/,每天
4,38,schedule,/ˈskedʒuːl/,时间表
4,39,delay,/dɪˈleɪ/,延误
4,40,cancel,/ˈkænsəl/,取消

5,41,book,/bʊk/,预订
5,42,booking,/ˈbʊkɪŋ/,预订
5,43,reservation,/ˌrezərˈveɪʃən/,预约
5,44,confirm,/kənˈfɜːrm/,确认
5,45,check-in,/ˈtʃek ɪn/,办理登机
5,46,check-out,/ˈtʃek aʊt/,退房
5,47,boarding,/ˈbɔːrdɪŋ/,登机
5,48,seat,/siːt/,座位
5,49,number,/ˈnʌmbər/,编号
5,50,class,/klæs/,等级

6,51,bag,/bæɡ/,包
6,52,luggage,/ˈlʌɡɪdʒ/,行李
6,53,baggage,/ˈbæɡɪdʒ/,行李
6,54,suitcase,/ˈsuːtkeɪs/,行李箱
6,55,backpack,/ˈbækpæk/,背包
6,56,carry-on,/ˈkæri ɑːn/,随身行李
6,57,checked baggage,/tʃekt ˈbæɡɪdʒ/,托运行李
6,58,lost,/lɔːst/,丢失的
6,59,heavy,/ˈhevi/,重的
6,60,light,/laɪt/,轻的
